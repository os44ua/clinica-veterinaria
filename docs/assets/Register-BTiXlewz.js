import{u as S,r as i,c as C,j as e,l as d,f,g as E,R as p}from"./index-DLtPwF8f.js";import{d as P}from"./dog-DqB3gY0C.js";const I=()=>{const{t:s}=S(),[n,j]=i.useState(""),[o,b]=i.useState(""),[m,N]=i.useState(""),[u,t]=i.useState(""),[h,v]=i.useState(""),[r,x]=i.useState(!1),c=C(),w=()=>(t(""),n.trim()?n.includes("@")?o.trim()?o.length<6?(t(s("auth.passwordMinLength")),!1):o!==m?(t(s("auth.passwordsNoMatch")),!1):!0:(t(s("auth.passwordRequired")),!1):(t(s("auth.emailInvalid")),!1):(t(s("auth.emailRequired")),!1)),y=async a=>{if(a.preventDefault(),!!w()){x(!0),t("");try{d.info(`Registrando nuevo usuario: ${n}`);const l=await f.signUp(n,o);d.info("Usuario registrado exitosamente"),await E.setUserRoles(l.user.uid,{email:l.user.email,roles:{admin:!1}});const g=await f.getUserRoles(l.user);v(s("auth.registerSuccess")),setTimeout(()=>{g.includes(p.ADMIN)?c("/adminvets"):g.includes(p.VETERINARIO)?c("/perfilveterinario"):c("/perfilcliente")},2e3)}catch(l){d.error(`Error en registro: ${l.message}`),t(l.message||s("auth.registerError"))}finally{x(!1)}}},R=()=>{t("")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-blue-100 flex items-center justify-center px-4 py-10",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:e.jsx("img",{src:P,alt:"Veterinary Clinic Logo",className:"w-16 h-16 object-contain"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:s("auth.registerTitle")}),e.jsx("p",{className:"text-gray-600 mt-2",children:s("auth.registerSubtitle")})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:s("auth.registerError")}),e.jsx("p",{className:"text-sm mt-1",children:u})]}),e.jsx("button",{type:"button",onClick:R,className:"text-red-600 hover:text-red-800 ml-2",children:"×"})]})}),h&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-semibold text-sm",children:s("auth.registerSuccessTitle")}),e.jsx("p",{className:"text-sm mt-1",children:h})]})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:s("auth.email")}),e.jsx("input",{id:"email",type:"email",value:n,onChange:a=>j(a.target.value),required:!0,placeholder:s("auth.emailPlaceholder"),disabled:r,className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:s("auth.password")}),e.jsx("input",{id:"password",type:"password",value:o,onChange:a=>b(a.target.value),required:!0,placeholder:s("auth.passwordPlaceholder"),disabled:r,className:"form-input"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s("auth.passwordMinLengthHint")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:s("auth.confirmPassword")}),e.jsx("input",{id:"confirmPassword",type:"password",value:m,onChange:a=>N(a.target.value),required:!0,placeholder:s("auth.passwordPlaceholder"),disabled:r,className:"form-input"})]}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary w-full py-3 text-lg",children:s(r?"auth.registering":"auth.registerButton")}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[s("auth.hasAccount")," ",e.jsx("button",{type:"button",onClick:()=>c("/login"),className:"text-cyan-500 hover:text-cyan-600 underline font-medium",disabled:r,children:s("auth.loginLink")})]})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:s("auth.importantInfo")}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),s("auth.defaultClientRole")]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),s("auth.canManagePets")]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),s("auth.adminCanChangeRole")]})]})]})]})})};export{I as default};
