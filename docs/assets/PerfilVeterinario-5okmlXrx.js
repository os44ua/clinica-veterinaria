import{u as L,r as o,A,a as D,o as S,h as V,l as i,E as B,j as e,F as f,i as I,k as F}from"./index-DLtPwF8f.js";import{d as $}from"./dog-DqB3gY0C.js";function P(){const{t}=L(),{user:n}=o.useContext(A),d=D(),{citas:y,loading:j,error:x}=S(r=>r.cita),[s,p]=o.useState(null),[v,N]=o.useState(!0),[h,g]=o.useState(""),[l,w]=o.useState(""),C=r=>{window.confirm(t("vet.confirmAppointment"))&&(d(f({id:r,estado:"confirmada",observaciones:t("vet.confirmedByVet")})),i.info(`Cita ${r} confirmada por el veterinario`))},k=r=>{window.confirm(t("vet.cancelAppointment"))&&(d(f({id:r,estado:"cancelada",observaciones:t("vet.cancelledByVet")})),i.info(`Cita ${r} cancelada por el veterinario`))},b=r=>{switch(r){case"pendiente":return t("appointment.pending");case"confirmada":return t("appointment.confirmed");case"cancelada":return t("appointment.cancelled");default:return t("admin.roles.unknown")}},E=r=>{const a=b(r);switch(r){case"pendiente":return e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-1"}),a]});case"confirmada":return e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 border border-green-200",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),a]});case"cancelada":return e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 border border-gray-200",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full mr-1"}),a]});default:return e.jsx("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:a})}},c=y.filter(r=>{if(!l.trim())return!0;const a=l.toLowerCase();return r.mascotaNombre.toLowerCase().includes(a)||r.clienteEmail.toLowerCase().includes(a)||r.fecha.includes(a)||r.motivo.toLowerCase().includes(a)||b(r.estado).toLowerCase().includes(a)});return o.useEffect(()=>{if(!n)return;const r=V();(async()=>{try{i.info("Cargando datos del veterinario...");const m=I(r,`veterinarios/${n.uid}`),u=await F(m);u.exists()?(p(u.val()),i.info("Datos del veterinario cargados")):(p({nombre:"Veterinario",apellidos:"Apellido",especialidad:t("vet.generalMedicine"),telefono:t("vet.notSpecified"),licencia:t("vet.notSpecified")}),i.warn("No se encontraron datos, se usÃ³ perfil por defecto"))}catch(m){i.error("Error al cargar datos del veterinario",m),g(t("vet.loadError"))}finally{N(!1)}})(),n.uid&&(i.info("Cargando citas del veterinario con Redux..."),d(B(n.uid)))},[n,d,t]),v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-blue-100 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"}),e.jsx("p",{className:"text-gray-600",children:t("vet.loading")})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-blue-100 py-8 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:$,alt:"Vet Logo",className:"w-12 h-12 object-contain mr-4"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:t("vet.title")}),e.jsxs("p",{className:"text-gray-600",children:[t("vet.welcome"),", Dr. ",s==null?void 0:s.nombre," ",s==null?void 0:s.apellidos]})]})]})}),(h||x)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t("errors.somethingWrong")}),e.jsx("p",{className:"text-sm mt-1",children:h||x})]}),e.jsx("button",{onClick:()=>g(""),className:"text-red-500 hover:text-red-700 font-semibold",children:t("forms.close")})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:t("vet.personalInfo")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:t("forms.name")}),e.jsx("p",{className:"text-gray-900 font-medium",children:s==null?void 0:s.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:t("forms.surname")}),e.jsx("p",{className:"text-gray-900 font-medium",children:s==null?void 0:s.apellidos})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:t("vet.specialty")}),e.jsx("p",{className:"text-gray-900 font-medium",children:s==null?void 0:s.especialidad})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:t("forms.phone")}),e.jsx("p",{className:"text-gray-900 font-medium",children:s==null?void 0:s.telefono})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:t("auth.email")}),e.jsx("p",{className:"text-gray-900 font-medium",children:n==null?void 0:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:t("vet.license")}),e.jsx("p",{className:"text-gray-900 font-medium",children:s==null?void 0:s.licencia})]})]})]}),e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border border-gray-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4 sm:mb-0",children:t("vet.appointmentsList")}),e.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:[c.length," ",c.length===1?"cita":"citas"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:l,onChange:r=>w(r.target.value),placeholder:t("appointment.searchPlaceholder"),className:"w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-3 focus:ring-cyan-500/30 focus:border-cyan-500 transition-all duration-200 bg-white shadow-sm"})]})]}),j?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-gray-200 border-t-cyan-500 mr-3"}),e.jsx("p",{className:"text-gray-600 text-lg",children:t("vet.loadingAppointments")})]}):c.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-100",children:[e.jsx("div",{className:"text-8xl mb-6",children:"ðŸ“‹"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:l.trim()?t("appointment.noAppointmentsFound"):t("vet.noAppointments")}),e.jsx("p",{className:"text-gray-500",children:l.trim()?"Intenta buscar con otros tÃ©rminos":"No hay citas programadas en este momento"})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gradient-to-r from-cyan-50 to-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b-2 border-gray-200",children:t("appointment.date")}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b-2 border-gray-200",children:t("appointment.time")}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b-2 border-gray-200",children:t("appointment.pet")}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b-2 border-gray-200",children:t("vet.client")}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b-2 border-gray-200",children:t("appointment.status")}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b-2 border-gray-200",children:t("appointment.reason")}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b-2 border-gray-200",children:t("admin.table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:c.map((r,a)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150 animate-slideIn",style:{animationDelay:`${a*.1}s`},children:[e.jsxs("td",{className:"px-6 py-4 text-center border-r border-gray-100",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:new Date(r.fecha).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(r.fecha).toLocaleDateString("es-ES",{weekday:"long"})})]}),e.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100",children:e.jsx("span",{className:"bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm font-medium",children:r.hora})}),e.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100",children:e.jsx("div",{className:"font-semibold text-blue-600",children:r.mascotaNombre})}),e.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100",children:e.jsx("div",{className:"text-gray-900 font-medium",children:r.clienteEmail})}),e.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100",children:E(r.estado)}),e.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100",children:e.jsx("div",{className:"max-w-xs mx-auto truncate cursor-help",title:r.motivo,children:r.motivo})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[r.estado==="pendiente"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(r.id),className:"px-3 py-1.5 text-xs font-medium rounded-md bg-green-500 text-white hover:bg-green-600 transition-all duration-200 shadow-sm hover:shadow-md",title:t("vet.confirmAppointment"),children:t("vet.confirm")}),e.jsx("button",{onClick:()=>k(r.id),className:"px-3 py-1.5 text-xs font-medium rounded-md bg-red-500 text-white hover:bg-red-600 transition-all duration-200 shadow-sm hover:shadow-md",title:t("vet.cancelAppointment"),children:t("vet.cancel")})]}),r.estado==="confirmada"&&e.jsx("span",{className:"text-sm text-gray-500",children:t("appointment.confirmed")}),r.estado==="cancelada"&&e.jsx("span",{className:"text-sm text-gray-500",children:t("appointment.cancelled")})]})})]},r.id))})]})})})]})]})})}export{P as default};
